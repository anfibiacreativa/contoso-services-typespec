import "@typespec/rest";
import "@typespec/openapi3";

using TypeSpec.Http;

/**
 * This is the Contoso Real Estate portal listings service
 */
@service({
  title: "Contoso Real Estate Listings Service",
  version: "2023-09-06",
})
@server("/api", "Contoso Azure Hosted Production Endpoint")
@server("http://localhost:7071/api", "Localhost Development Endpoint")
namespace ContosoRealEstate;

enum Ammenity {
  `swimming pool`,
  gym,
  `wi-fi`,
  parking,
  balcony,
  terrace,
  garden,
  patio,
  sauna,
  jacuzzi,
  fireplace,
  `air conditioning`,
  heating,
  elevator,
  `laundry room`,
  dishwasher,
  microwave,
  furniture,
  `no furniture`,
}

/**
 * A valid address for listing
 */
model Address {
  id: string;
  slug: string;
  buildingNumber: string;
  street: string;
  city: string;
  zipCode: string;
  country: string;
  createdAt: utcDateTime;
  state?: string;
}

/**
 * A valid review for listing
 */
model Review {
  id?: string;
  slug?: string;
  userId: string;
  listingId: string;
  rating: int32;
  comment: string;
}

/**
 *
 */
model Listing {
  /**
   * Autogenerated unique identifier for the listing
   */
  @format("uuid")
  id: string;

  title: string;
  slug: string;
  createdAt?: utcDateTime;
  bathrooms: int32;
  bedrooms: int32;
  description: string;
  isFeatured?: boolean;
  isRecommended?: boolean;
  photos: string[];
  capacity?: int32;

  /**
   * Identifies ammenities in a listing
   */
  ammenities?: Ammenity[];

  /**
   * Listing reviews
   */
  reviews?: Review[];

  /**
   * A valid address for listing
   */
  address: Address;

  fees?: {};
}

@error
model Error {
  code: int32;
  message: string;
}

@route("listings")
@tag("listing")
interface Listings {
  @get list(): Listing[] | Error;
  @get read(@path id: Listing.id): Listing | Error;
}
